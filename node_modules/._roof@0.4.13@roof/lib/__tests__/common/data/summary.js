var Roof = require('roof')

var Summary = require('../type/Summary.js')


module.exports = {
  init : function( users ){
    var summary = new Summary

    var families = []
    var totalUser = 0
    users.forEach(user=>{
      if( families.indexOf( user.get('family') ) === -1 ){
        families.push( user.get('family'))
      }
      totalUser++
    })

    summary.set({
      families : families,
      totalUser : totalUser
    })

    return summary
  },
  waitFor : ['users']
}